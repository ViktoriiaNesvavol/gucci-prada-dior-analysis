<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>SPARQL Queries and LLM Prompts</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Dior, Prada, Gucci</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">This is Massively</a></li>
							<li class="active"><a href="generic.html">Generic Page</a></li>
							<li><a href="elements.html">Elements Reference</a></li>
						</ul>
			
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<span class="date">April 25, 2017</span>
									<h1>SPARQL Queries<br />
									and LLM Prompts</h1>
									<p>This section documents the SPARQL queries and LLM prompts used to extract, verify, and enrich information about luxury fashion brands (Gucci, Prada, Dior) in Wikidata. We combined structured querying with intelligent prompting to identify gaps and generate insights.</p>
								</header>
								<div class="image main"><img src="images/pic01.jpg" alt="" /></div>
								<p><p>Here are the demonstrations of each mandatory SPARQL keyword: <strong>OPTIONAL</strong>, <strong>DISTINCT</strong>, <strong>UNION</strong>, <strong>FILTER</strong>, <strong>REGEX</strong>, <strong>LIMIT</strong>, and <strong>ORDER BY</strong>.</p>

    <hr>

    <h4 id="optional-brands-location-and-founder">1Ô∏è‚É£ OPTIONAL: Brands, Location, and Founder</h4>
    <p><strong>Purpose:</strong> Uses <strong>OPTIONAL</strong> to retrieve brands and their founding locations, <em>optionally</em> including the founder's name. This ensures that even if a founder isn't linked, the brand and its location are still included, providing a comprehensive list.</p>
    <pre><code>SELECT ?brand ?brandLabel ?locationLabel ?founderLabel
WHERE {
  VALUES ?brand {
    wd:Q202175  # Gucci
    wd:Q153545  # Prada
    wd:Q207827  # Dior
  }

  OPTIONAL { ?brand wdt:P112 ?founder . }
  OPTIONAL { ?brand wdt:P159 ?location . }

  SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
}
ORDER BY ?brandLabel</code></pre>
    <img src="images/optional.png" alt="Screenshot of Query 1 Results">
    <p>üìé <a href="https://w.wiki/ESNQ">Link to Wikidata Query Service Results for Query 1</a></p>

    <hr>

    <h4 id="distinct-unique-countries-of-headquarters">2Ô∏è‚É£ DISTINCT: Unique Countries of Headquarters</h4>
    <p><strong>Purpose:</strong> Uses <strong>DISTINCT</strong> to illustrate how to get a unique list of countries where these brands' headquarters are located, preventing duplicate entries for countries shared by multiple brands.</p>
    <pre><code>SELECT DISTINCT ?country ?countryLabel WHERE {
  VALUES ?brand { wd:Q202175 wd:Q153545 wd:Q207827 }
  ?brand wdt:P159 ?headquarters .
  ?headquarters wdt:P17 ?country .

  SERVICE wikibase:label {
    bd:serviceParam wikibase:language "en".
  }
}
ORDER BY ?countryLabel</code></pre>
    <img src="images/distinct.png" alt="Screenshot of Query 2 Results">
    <p>üìé <a href="https://w.wiki/ESnx">Link to Wikidata Query Service Results for Query 2</a></p>

    <hr>

    <h4 id="union-associated-people-for-gucci-or-prada">3Ô∏è‚É£ UNION: Associated People for Gucci or Prada</h4>
    <p><strong>Purpose:</strong> Employs <strong>UNION</strong> to combine results from different relationship types (founder, creative director, general member) to find all people associated with Gucci or Prada, regardless of their specific role.</p>
    <pre><code>SELECT DISTINCT ?person ?personLabel ?brandLabel WHERE {
  VALUES ?brand {
    wd:Q202175
    wd:Q153545
  }
  { ?brand wdt:P112 ?person. }
  UNION
  { ?brand wdt:P12617 ?person. }
  UNION
  { ?brand wdt:P1037 ?person. }
  SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
}
ORDER BY (?personLabel)</code></pre>
    <img src="images/union.png" alt="Screenshot of Query 3 Results">
    <p>üìé <a href="https://w.wiki/ESn$">Link to Wikidata Query Service Results for Query 3</a></p>

    <hr>

    <h4 id="filter-regex-gucci-silk-clothing-items">4Ô∏è‚É£ FILTER & REGEX: Gucci Silk Clothing Items</h4>
    <p><strong>Purpose:</strong> This query expertly combines <strong>FILTER</strong> and <strong>REGEX</strong> to narrow down results. It first identifies items classified as "clothing" that are associated with "Gucci" (using <strong>REGEX</strong> on the label). Then, it further refines these results, ensuring that the item's label or its description also contains the word "silk" (using another <strong>REGEX</strong> with case-insensitivity). This dual filtering allows for highly specific data extraction based on both semantic type and textual patterns.</p>
    <pre><code>SELECT DISTINCT ?item ?itemLabel ?itemDescription WHERE {
  ?item wdt:P31/wdt:P279* wd:Q11460 .
  ?item rdfs:label ?itemLabel .


  FILTER (
    REGEX(?itemLabel, "Gucci", "i") ||
    REGEX(?itemLabel, "silk", "i") ||
    REGEX(?itemDescription, "silk", "i"))
  FILTER (LANG(?itemLabel) = "en")

  SERVICE wikibase:label {
    bd:serviceParam wikibase:language "en".
  }
}
ORDER BY ?itemLabel
LIMIT 10</code></pre>
    <img src="images/filter+regex.png" alt="Screenshot of Query 4 Results">
    <p>üìé <a href="https://w.wiki/ESoB">Link to Wikidata Query Service Results for Query 4</a></p>

    <hr>

    <h4 id="limit-top-5-common-item-types">5Ô∏è‚É£ LIMIT: Top 5 Common Item Types</h4>
    <p><strong>Purpose:</strong> This query leverages the <strong>LIMIT</strong> keyword to rank Gucci, Prada, and Dior based on the number of distinct fashion collections they have documented on Wikidata. By counting and ordering these collections, it provides insight into which brand has the most extensive public record of its creative outputs, offering a robust example of <strong>LIMIT</strong> applied directly to our topic brands.</p>
    <pre><code>SELECT ?brand ?brandLabel (COUNT(DISTINCT ?collection) AS ?numberOfCollections) WHERE {
  VALUES ?brand { wd:Q178516
                  wd:Q193136
                  wd:Q542767
                 }
  ?brand wdt:P6379 ?collection .

  SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
}
GROUP BY ?brand ?brandLabel
ORDER BY DESC(?numberOfCollections)
LIMIT 3</code></pre>
    <img src="images/limit.png" alt="Screenshot of Query 5 Results">
    <p>üìé <a href="https://w.wiki/ESoS">Link to Wikidata Query Service Results for Query 5</a></p>

    <hr>

    <h4 id="order-by-brands-by-name">6Ô∏è‚É£ ORDER BY: Brands by Name</h4>
    <p><strong>Purpose:</strong> Uses <strong>ORDER BY</strong> to sort the results by the brand's name (?brandLabel) in ascending alphabetical order, providing a structured and easily consumable list.</p>
    <pre><code>SELECT ?brand ?brandLabel ?foundingYear WHERE {
  VALUES ?brand { wd:Q178516 wd:Q193136 wd:Q542767 }
  ?brand wdt:P571 ?foundingDate .
  BIND(YEAR(?foundingDate) AS ?foundingYear)

  SERVICE wikibase:label {
    bd:serviceParam wikibase:language "en".
  }
}
ORDER BY ?brandLabel</code></pre>
    <img src="images/orderby.png" alt="Screenshot of Query 6 Results">
    <p>üìé <a href="https://w.wiki/ESoZ">Link to Wikidata Query Service Results for Query 6</a></p>		
	</body>
</html>
